<tal:block define="tups view/getCombinedWidgets;
                   niceTitles view/getNiceTitles"
           repeat="tup tups">

  <div tal:define="error python:tup[0].error;
                  idx repeat/tup/index;
                  tupclass python:' '.join([a.klass for a in tup])"
      tal:attributes="class python:'table-cell field ' +tupclass+ (error and ' error' or '')">
    <tal:block repeat="widget tup">

    <a href=""
       tal:define="link python:view.context.context.link(view.getContent(), widget.field.__name__)"
       tal:omit-tag="python:widget.mode == 'input' or link is None"
       tal:attributes="href link">

      <span class="error" tal:omit-tag="not:error">
        <div tal:condition="error" tal:replace="structure error/render" />
        <input type="text" tal:replace="structure widget/render" />
      </span>

    </a>
    <br/>
    </tal:block>

  </div>
</tal:block>
